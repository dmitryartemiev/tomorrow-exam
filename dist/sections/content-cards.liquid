<script src="{{ 'contentCards-script.js' | asset_url }}" defer="defer"></script>
{{ 'contentCards-script.css' | asset_url | stylesheet_tag }}

{% if section.settings.heading != blank %}
	<h1 class="h1">{{ section.settings.heading }}</h1>
{% endif %}

{% if section.blocks.size > 0 %}
	<div class="content-cards__wrapper{% if section.blocks.size > 1 %} content-cards__wrapper--desktop{% endif %}">
		{% for block in section.blocks %}
			{% if block.settings.image != blank %}				
				<div class="content-cards__card" style="background-color: {{ block.settings.background }};">
					<div class="card__image-wrapper">
						{{ block.settings.image | image_url: width: 1500 | image_tag:
							loading: 'lazy',
							width: block.settings.image.width,
							height: block.settings.image.height,
							class: 'card__image',
							sizes: '50vw',
							widths: '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840',
							alt: image.alt | escape
						}}
					</div>
					{% if block.settings.heading != blank %}
						<h3 class="h3 card__heading">{{ block.settings.heading }}</h3>
					{% endif %}
					{% if block.settings.text != blank %}
						{{ block.settings.text }}
					{% endif %}
					{% if block.settings.link_label != blank and block.settings.link_url != blank %}
						<div class="card__link-wrapper">
							<a class="card__link link" href="{{ block.settings.link_url }}">{{ block.settings.link_label }}</a>
						</div>
					{% endif %}
				</div>
			{% endif %}
		{% endfor %}
	</div>
	{% if section.blocks.size > 1 %}
		<div class="content-cards__wrapper content-cards__wrapper--mobile swiper">
			<div class="swiper-wrapper">
				{% for block in section.blocks %}
					{% if block.settings.image != blank %}				
						<div class="content-cards__card swiper-slide" style="background-color: {{ block.settings.background }};">
							<div class="card__image-wrapper">
								{{ block.settings.image | image_url: width: 1500 | image_tag:
									loading: 'lazy',
									width: block.settings.image.width,
									height: block.settings.image.height,
									class: 'card__image',
									sizes: '50vw',
									widths: '375, 550, 750, 1100, 1500, 1780, 2000, 3000, 3840',
									alt: image.alt | escape
								}}
							</div>
							{% if block.settings.heading != blank %}
								<h3 class="h3 card__heading">{{ block.settings.heading }}</h3>
							{% endif %}
							{% if block.settings.text != blank %}
								{{ block.settings.text }}
							{% endif %}
							{% if block.settings.link_label != blank and block.settings.link_url != blank %}
								<div class="card__link-wrapper">
									<a class="card__link link" href="{{ block.settings.link_url }}">{{ block.settings.link_label }}</a>
								</div>
							{% endif %}
						</div>
					{% endif %}
				{% endfor %}
			</div>
			<div class="swiper-button swiper-button-next">
				<img src="{{ 'right.svg' | asset_url }}">
			</div>
			<div class="swiper-button swiper-button-prev">
				<img src="{{ 'right.svg' | asset_url }}">
			</div>
	
		</div>
	{% endif %}
{% endif %}

{% schema %}
{
	"name": "Content cards",
	"tag": "section",
	"class": "content-cards",
	"settings": [
		{
			"type": "html",
			"id": "heading",
			"label": "Section Heading"
		}
	],
	"blocks": [{
		"type": "image",
		"name": "Card",
		"limit": 4,
		"settings": [
			{
				"type": "color",
				"id": "background",
				"label": "Card background color",
				"default": "#00966E"
			},
			{
				"type": "image_picker",
				"id": "image",
				"label": "Card image"
			},
			{
				"type": "text",
				"id": "heading",
				"label": "Card heading",
				"placeholder": "Make a scene."
			},
			{
				"type": "richtext",
				"id": "text",
				"label": "Card text"
			},
			{
				"type": "text",
				"id": "link_label",
				"label": "Link label"
			},
			{
				"type": "url",
				"id": "link_url",
				"label": "Link url"
			}
		]
	}],
	"presets": [{
		"name": "Content cards",
		"blocks": []
	}]
}
{% endschema %}